{% extends "front/base.html.twig" %}

{% block main %}

    <h2>{{ product.name }} {{ product.price }} â‚¬</h2>
    <h3>{{ product.category.name }}</h3>
    <h3>{{ product.licence.name }}</h3>

    <hr>

    <h2>Commentaires</h2>

    {% if product.comments %}

    {% for comment in product.comments %}

    <h4>Par : {{ comment.user.firstname }} {{ comment.user.name }}</h4>
    <h4>Le : {{ comment.date | date('d/m/Y')}}</h4>
    <p>{{ comment.content }}</p>

    {% if app.user is same as(comment.user) %}
    
    <a href="{{ path('update_comment', {'id' : comment.id}) }}">Modifier votre commentaire</a>
    <a href="{{ path('delete_comment', {'id' : comment.id}) }}">Supprimer votre commentaire</a>

    {% endif %}

    {% endfor %}

    {% else %}
        
    <p>Il n'y a pas de commentaires pour ce produit.</p>

    {% endif %}

    {% if app.user %}
    
    {{form(commentForm)}}

    {% else %}
        
    <h4>Vous devez vous connecter pour ajouter un commentaire.</h4>

    {% endif %}

{% endblock %}